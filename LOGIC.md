# üß† –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã "–ö–ª—É–±–æ—á–∫–∏"

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ–π –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –∏ –º–µ—Ö–∞–Ω–∏–∫.

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
sheep-game.html
‚îú‚îÄ‚îÄ CSS —Å—Ç–∏–ª–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ)
‚îÇ   ‚îú‚îÄ‚îÄ UI —ç–ª–µ–º–µ–Ω—Ç—ã (–∫–Ω–æ–ø–∫–∏, –º–æ–¥–∞–ª–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
‚îÇ   ‚îú‚îÄ‚îÄ –û–≤–µ—á–∫–∞ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ –≠—Ñ—Ñ–µ–∫—Ç—ã (—á–∞—Å—Ç–∏—Ü—ã, –≤–æ–ª–æ–∫–Ω–∞)
‚îÇ
‚îú‚îÄ‚îÄ HTML —Ä–∞–∑–º–µ—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω
‚îÇ   ‚îú‚îÄ‚îÄ –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ –ò–≥—Ä–æ–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–ø–∞—É–∑–∞, –ø–æ–±–µ–¥–∞, –ø—Ä–æ–∏–≥—Ä—ã—à, –æ–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è)
‚îÇ
‚îî‚îÄ‚îÄ JavaScript –ª–æ–≥–∏–∫–∞
    ‚îú‚îÄ‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ü–≤–µ—Ç–∞, —Ç–∏–ø—ã, —É—Ä–æ–≤–Ω–∏)
    ‚îú‚îÄ‚îÄ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã (gameState)
    ‚îú‚îÄ‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏
    ‚îú‚îÄ‚îÄ –§–∏–∑–∏–∫–∞ –≤—ã—Å—Ç—Ä–µ–ª–∞
    ‚îú‚îÄ‚îÄ –ú–µ—Ö–∞–Ω–∏–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ –°–∏—Å—Ç–µ–º–∞ –æ–±–≤–∞–ª–æ–≤
    ‚îú‚îÄ‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã/–ø–æ—Ä–∞–∂–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ –†–µ–Ω–¥–µ—Ä (Canvas)
```

## üéÆ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã (gameState)

```javascript
gameState = {
    screen: 'start',        // start, levels, playing
    currentLevel: 0,        // –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
    unlockedLevels: 1,      // —Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
    levelStars: {},         // –∑–≤—ë–∑–¥—ã –∑–∞ —É—Ä–æ–≤–Ω–∏ {0: 3, 1: 2, ...}
    
    // –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
    grid: [],               // 2D –º–∞—Å—Å–∏–≤ –∫–ª—É–±–∫–æ–≤
    cols: 9,                // –∫–æ–ª–æ–Ω–æ–∫
    rows: 0,                // —Å—Ç—Ä–æ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è)
    cellSize: 42,           // —Ä–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
    
    // –í—ã—Å—Ç—Ä–µ–ª
    currentYarn: null,      // —Ç–µ–∫—É—â–∏–π –∫–ª—É–±–æ–∫ –¥–ª—è –≤—ã—Å—Ç—Ä–µ–ª–∞
    nextYarn: null,         // —Å–ª–µ–¥—É—é—â–∏–π –∫–ª—É–±–æ–∫
    isAiming: false,        // –ø—Ä–∏—Ü–µ–ª–∏–≤–∞–µ—Ç—Å—è –ª–∏ –∏–≥—Ä–æ–∫
    aimAngle: Math.PI / 2,  // —É–≥–æ–ª –ø—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏—è
    
    // –ü—Ä–æ–≥—Ä–µ—Å—Å
    moves: 0,               // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ö–æ–¥–æ–≤
    maxMoves: 20,           // –º–∞–∫—Å–∏–º—É–º —Ö–æ–¥–æ–≤
    goals: [],              // —Ü–µ–ª–∏ —É—Ä–æ–≤–Ω—è
    progress: {},           // –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ü–µ–ª—è–º {drop: 5, ice: 2, ...}
    
    // –§–ª–∞–≥–∏
    isAnimating: false,     // –∏–¥—ë—Ç –∞–Ω–∏–º–∞—Ü–∏—è
    isPaused: false,        // –ø–∞—É–∑–∞
    levelEnded: false       // —É—Ä–æ–≤–µ–Ω—å –∑–∞–≤–µ—Ä—à—ë–Ω
}
```

## üß∂ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—É–±–∫–∞ (Yarn)

```javascript
yarn = {
    color: 'mint',          // —Ü–≤–µ—Ç –∏–∑ COLORS
    type: 'normal',         // —Ç–∏–ø –∏–∑ SPECIAL_TYPES
    x: 100,                 // –ø–æ–∑–∏—Ü–∏—è X (–ø–∏–∫—Å–µ–ª–∏)
    y: 50,                  // –ø–æ–∑–∏—Ü–∏—è Y (–ø–∏–∫—Å–µ–ª–∏)
    row: 1,                 // —Å—Ç—Ä–æ–∫–∞ –≤ —Å–µ—Ç–∫–µ
    col: 3,                 // –∫–æ–ª–æ–Ω–∫–∞ –≤ —Å–µ—Ç–∫–µ
    visible: true,          // –≤–∏–¥–∏–º –ª–∏
    iceHits: 0,             // —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–ø–∞–ª–∏ (–¥–ª—è –ª—å–¥–∞)
    falling: false,         // –ø–∞–¥–∞–µ—Ç –ª–∏ —Å–µ–π—á–∞—Å
    fallY: 0,               // –ø–æ–∑–∏—Ü–∏—è –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
    fallVel: 0              // —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
}
```

## üéØ –¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤

| –¢–∏–ø | –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ | –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ–±–≤–∞–ª–µ |
|-----|--------------------------|----------------------|
| `normal` | –ò—Å—á–µ–∑–∞–µ—Ç | –ò—Å—á–µ–∑–∞–µ—Ç |
| `bomb` | –í–∑—Ä—ã–≤–∞–µ—Ç —Å–æ—Å–µ–¥–µ–π + –∏—Å—á–µ–∑–∞–µ—Ç | –ó–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è + –∏—Å—á–µ–∑–∞–µ—Ç |
| `rainbow` | –°–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª—é–±—ã–º —Ü–≤–µ—Ç–æ–º | –ò—Å—á–µ–∑–∞–µ—Ç |
| `ice` | +1 –∫ iceHits, –ø—Ä–∏ iceHits>=2 –∏—Å—á–µ–∑–∞–µ—Ç | –ó–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É + –∏—Å—á–µ–∑–∞–µ—Ç |
| `sticky` | –ò—Å—á–µ–∑–∞–µ—Ç + –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è | –ó–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è + –∏—Å—á–µ–∑–∞–µ—Ç |
| `animal` | –ò—Å—á–µ–∑–∞–µ—Ç + –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è + —Ä–µ–∞–∫—Ü–∏—è –æ–≤–µ—á–∫–∏ | –ó–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è + —Ä–µ–∞–∫—Ü–∏—è + –∏—Å—á–µ–∑–∞–µ—Ç |
| `fog` | –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ü–≤–µ—Ç (TODO) | –ò—Å—á–µ–∑–∞–µ—Ç |

## üî´ –§–∏–∑–∏–∫–∞ –≤—ã—Å—Ç—Ä–µ–ª–∞

### –ê–ª–≥–æ—Ä–∏—Ç–º `shoot(angle)`

1. –ù–∞—á–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞: —Ü–µ–Ω—Ç—Ä –Ω–∏–∑–∞ canvas
2. –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª—ë—Ç–∞ –ø–æ —à–∞–≥–∞–º (–¥–æ 200 –∏—Ç–µ—Ä–∞—Ü–∏–π):
   - –î–≤–∏–∂–µ–Ω–∏–µ: `x += cos(angle) * speed`, `y -= sin(angle) * speed`
   - –û—Ç—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç –±–æ–∫–æ–≤—ã—Ö —Å—Ç–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã ‚Üí `collision.hitTop = true`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –∫–ª—É–±–∫–∞–º–∏ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ < cellSize * 0.9)
3. –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–ª—ë—Ç–∞ (`animateShot`)
4. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–ª—É–±–∫–∞ (`placeYarn`)
5. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç `moves++`

### –†–∞–∑–º–µ—â–µ–Ω–∏–µ `placeYarn(collision, yarn)`

1. –ù–∞–π—Ç–∏ –±–ª–∏–∂–∞–π—à—É—é —Å–≤–æ–±–æ–¥–Ω—É—é –ø–æ–∑–∏—Ü–∏—é (`findNearestEmpty`)
2. –ü–æ–∑–∏—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä—è–¥–æ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–ª—É–±–∫–æ–º –∏–ª–∏ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —Ä—è–¥—É
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—É–±–æ–∫ –≤ —Å–µ—Ç–∫–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (`checkMatches`)

## üîó –ú–µ—Ö–∞–Ω–∏–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

### –ê–ª–≥–æ—Ä–∏—Ç–º `checkMatches(startYarn)`

1. Flood-fill –æ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –∫–ª—É–±–∫–∞
2. –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–ª—É–±–∫–∏ —Ç–æ–≥–æ –∂–µ —Ü–≤–µ—Ç–∞
3. –†–∞–¥—É–∂–Ω—ã–π (`rainbow`) —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª—é–±—ã–º —Ü–≤–µ—Ç–æ–º
4. –ï—Å–ª–∏ —Å–æ–±—Ä–∞–Ω–æ >= 3 –∫–ª—É–±–∫–æ–≤ ‚Üí `removeMatched()`
5. –ò–Ω–∞—á–µ ‚Üí `checkWinOrLose()`

### –£–¥–∞–ª–µ–Ω–∏–µ `removeMatched(yarns)`

1. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤:
   - `bomb`: –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Å–µ–¥–µ–π –≤ —Å–ø–∏—Å–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è
   - `animal`: +1 –∫ –ø—Ä–æ–≥—Ä–µ—Å—Å—É, —Ä–µ–∞–∫—Ü–∏—è –æ–≤–µ—á–∫–∏
   - `ice`: –µ—Å–ª–∏ iceHits < 2 ‚Üí —É–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞, –∏–Ω–∞—á–µ –∑–∞—Å—á–∏—Ç–∞—Ç—å
   - `sticky`: +1 –∫ –ø—Ä–æ–≥—Ä–µ—Å—Å—É
2. –≠—Ñ—Ñ–µ–∫—Ç —Ä–∞—Å–ø—É—à–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
3. –°–∫—Ä—ã—Ç—å –∫–ª—É–±–∫–∏ (`visible = false`)
4. +N –∫ `progress.match`
5. –†–µ–∞–∫—Ü–∏—è –æ–≤–µ—á–∫–∏ (–µ—Å–ª–∏ >= 5)
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–≤–∞–ª—ã (`checkFloating`)

## ‚¨áÔ∏è –°–∏—Å—Ç–µ–º–∞ –æ–±–≤–∞–ª–æ–≤

### –ê–ª–≥–æ—Ä–∏—Ç–º `checkFloating()`

1. –ü–æ–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–ª—É–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –≤–µ—Ä—Ö–Ω–∏–º —Ä—è–¥–æ–º (BFS/DFS)
2. –í—Å–µ –Ω–µ–ø–æ–º–µ—á–µ–Ω–Ω—ã–µ ‚Üí –ø–∞–¥–∞—é—Ç (–∫—Ä–æ–º–µ `sticky` –∏ –∏—Ö —Å–æ—Å–µ–¥–µ–π)
3. –ó–∞—Å—á–∏—Ç–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –ø–∞–¥–∞—é—â–∏—Ö –∫–ª—É–±–∫–æ–≤:
   - `ice` ‚Üí +1 (–ë–ï–ó –ø—Ä–æ–≤–µ—Ä–∫–∏ iceHits ‚Äî –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ª—ë–¥ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É!)
   - `animal` ‚Üí +1 + —Ä–µ–∞–∫—Ü–∏—è –æ–≤–µ—á–∫–∏
   - `sticky` ‚Üí +1
   - `bomb` ‚Üí +1
4. +N –∫ `progress.drop`
5. –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞–¥–µ–Ω–∏—è (`animateFalling`)
6. –ü–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è ‚Üí `checkWin()`

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ª–∏–ø—É—á–µ–∫ (sticky)

–õ–∏–ø—É—á–∫–∏ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≥—Ä—É–ø–ø—É –æ—Ç –ø–∞–¥–µ–Ω–∏—è:
```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–ø—É—á–∫–∏ ‚Äî –æ–Ω–∏ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç
if (yarn.type === 'sticky') continue;
const neighbors = getNeighbors(yarn.row, yarn.col);
if (neighbors.some(n => n && n.visible && n.type === 'sticky')) continue;
```

## üèÜ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã/–ø–æ—Ä–∞–∂–µ–Ω–∏—è

### `checkWinOrLose()`

```javascript
1. –í—Å–µ —Ü–µ–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã? ‚Üí –ü–û–ë–ï–î–ê
   - –ü–æ–¥—Å—á—ë—Ç –∑–≤—ë–∑–¥ –ø–æ –æ—Å—Ç–∞–≤—à–∏–º—Å—è —Ö–æ–¥–∞–º
   - –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª–∫–∏ –ø–æ–±–µ–¥—ã

2. –•–æ–¥—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å? ‚Üí –ü–û–†–ê–ñ–ï–ù–ò–ï
   - –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª–∫–∏ "–ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å"

3. –ü–æ–ª–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ? ‚Üí –ü–û–†–ê–ñ–ï–ù–ò–ï
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: –∫–ª—É–±–∫–∏ –≤ –Ω–∏–∂–Ω–µ–º —Ä—è–¥—É —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ
```

### –ü–æ–¥—Å—á—ë—Ç –∑–≤—ë–∑–¥

```javascript
movesLeft = maxMoves - moves;
stars = 1;
if (movesLeft >= maxMoves * 0.3) stars = 2;  // >= 30% —Ö–æ–¥–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å
if (movesLeft >= maxMoves * 0.5) stars = 3;  // >= 50% —Ö–æ–¥–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å
```

## üñº –†–µ–Ω–¥–µ—Ä

### –ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞

```javascript
// –ß—ë—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏: –æ–±—ã—á–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
// –ù–µ—á—ë—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏: —Å–¥–≤–∏–≥ –Ω–∞ 0.5 —è—á–µ–π–∫–∏
const offset = row % 2 === 1 ? 0.5 : 0;
const colCount = row % 2 === 1 ? cols - 1 : cols;

x = (col + offset) * cellSize + offsetX + cellSize / 2;
y = row * cellSize * 0.866 + offsetY + cellSize / 2;  // 0.866 ‚âà ‚àö3/2
```

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–ª—É–±–∫–∞

1. –¢–µ–Ω—å (—Å–º–µ—â—ë–Ω–Ω—ã–π –∫—Ä—É–≥)
2. –û—Å–Ω–æ–≤–Ω–æ–π –∫—Ä—É–≥ —Å —Ä–∞–¥–∏–∞–ª—å–Ω—ã–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º (–æ–±—ä—ë–º)
3. –¢–µ–∫—Å—Ç—É—Ä–∞ –Ω–∏—Ç–æ–∫ (–¥—É–≥–∏ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é)
4. –ò–∫–æ–Ω–∫–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## üêë –†–µ–∞–∫—Ü–∏–∏ –æ–≤–µ—á–∫–∏

| –°–æ–±—ã—Ç–∏–µ | –ê–Ω–∏–º–∞—Ü–∏—è | CSS –∫–ª–∞—Å—Å |
|---------|----------|-----------|
| –ë–æ–ª—å—à–æ–π –æ–±–≤–∞–ª (>=5) | –ü—Ä—ã–∂–æ–∫ –≤–≤–µ—Ä—Ö | `happy` |
| –ö–æ–º–±–æ (>=8) | –í—Ä–∞—â–µ–Ω–∏–µ | `spin` |
| –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∑–≤–µ—Ä—É—à–∫–∏ | –ü—É–ª—å—Å–∞—Ü–∏—è | `clap` |

## üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

```javascript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
localStorage.setItem('sheepGame', JSON.stringify({
    unlockedLevels: gameState.unlockedLevels,
    levelStars: gameState.levelStars
}));

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
const saved = localStorage.getItem('sheepGame');
if (saved) {
    const data = JSON.parse(saved);
    gameState.unlockedLevels = data.unlockedLevels || 1;
    gameState.levelStars = data.levelStars || {};
}
```

## üì± –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ú—ã—à—å
- `mousemove` –Ω–∞ canvas ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–≥–ª–∞ –ø—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏—è
- `click` –Ω–∞ canvas ‚Üí –≤—ã—Å—Ç—Ä–µ–ª

### –¢–∞—á
- `touchmove` ‚Üí –ø—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏–µ
- `touchend` ‚Üí –≤—ã—Å—Ç—Ä–µ–ª

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–≥–ª–∞
```javascript
angle = Math.max(0.2, Math.min(Math.PI - 0.2, angle));
// –ù–µ–ª—å–∑—è —Å—Ç—Ä–µ–ª—è—Ç—å –ø–æ—á—Ç–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
```

## üé® –≠—Ñ—Ñ–µ–∫—Ç—ã

### –†–∞—Å–ø—É—à–µ–Ω–∏–µ (puff effect)
–ü—Ä–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–∏ –∫–ª—É–±–∫–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è 12 "–≤–æ–ª–æ–∫–æ–Ω" ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–µ div'—ã —Å CSS-–∞–Ω–∏–º–∞—Ü–∏–µ–π —Ä–∞–∑–ª—ë—Ç–∞.

### –õ–∏–Ω–∏—è –ø—Ä–∏—Ü–µ–ª–∏–≤–∞–Ω–∏—è
–ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ª–∏–Ω–∏—è –æ—Ç –æ–≤–µ—á–∫–∏ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –≤—ã—Å—Ç—Ä–µ–ª–∞. –î–ª–∏–Ω–∞: 200px, –ø–æ–≤–æ—Ä–æ—Ç –ø–æ —É–≥–ª—É.

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è*
